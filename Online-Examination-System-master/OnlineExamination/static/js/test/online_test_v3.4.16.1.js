$('.slimscroll').slimScroll({railVisible:true,railOpacity:0,alwaysVisible:true,position:'right',distance:'0px'});$(function(){$('[title]').tooltip();})
$(document).on('click','#start_test_btn_instructions',function(){$('#prj_timer').startPrjCounter({'minutes':$('#test_duration').text()},function(){$('#prj_timer').find('countdown').text("Test Ended !");$('#finish_test_btn').click();});$('.test_instructions_fade').addClass('hidden');});$(document).on('click','.question_option .q_tbl_optn_col_3',function(){$(this).closest('.question_option').find(':checkbox').prop('checked',function(i,value){return!value;});$(this).closest('.question_option').find(':radio').prop('checked',function(i,value){return!value;});});$(document).on('click','.question_option .q_tbl_optn_col_2',function(){$(this).closest('.question_option').find(':checkbox').prop('checked',function(i,value){return!value;});$(this).closest('.question_option').find(':radio').prop('checked',function(i,value){return!value;});});var seconds_elapsed_timer=0;var universal_timer=setInterval(function(){var cur_time=parseFloat($('.active_question').attr('data-time-spent'));$('.active_question').attr('data-time-spent',cur_time+0.1);var secs=Math.round(cur_time%60);var minutes=Math.floor((cur_time/60)%60);if(minutes==0)
{$(".active_question .secount").empty().append(secs+'sec');}
else{$(".active_question .secount").empty().append(minutes+':'+secs);}},100);function bring_question_in_view(question_id){var end_of_test_reached=false;if(!question_id){alert("End of Test Reached !!");end_of_test_reached=true;return;}
var current_question=$('#test_questions_wrapper').find('#'+question_id);var prev_active_question=$('#test_questions_wrapper').find('.active_question');if(current_question[0]==prev_active_question[0]){return;}
if(prev_active_question.find(":checked").length>0||prev_active_question.find('.answer_value_input_box').val()){change_question_state(prev_active_question.attr('id'),'answered');}else{change_question_state(prev_active_question.attr('id'),'skipped');}
var c_section=current_question.closest('.section_wrapper');var new_section_id=c_section.attr('data-section-id');var is_c_section_active=c_section.hasClass('active');if(!is_c_section_active){$('#test_questions_wrapper').find('.active_section').removeClass('active_section').removeClass('active').addClass('hidden');c_section.addClass('active_section').removeClass('hidden');$('#test_sections_wrapper').find('.active_section').removeClass('active_section').removeClass('active').addClass('btn-default');$('#test_sections_wrapper').find('.'+new_section_id).removeClass('btn-default').addClass('active_section').addClass('active');}
prev_active_question.removeClass('active_question').addClass('hidden');current_question.addClass('active_question').removeClass('hidden');var right_q_btn=$('#test_right_snippets_wrapper').find('.section_q_btn_wrapper').find('.'+question_id);var r_section=right_q_btn.closest('.section_q_btn_wrapper');var is_r_section_active=r_section.hasClass('active');if(!is_r_section_active){$('#test_right_snippets_wrapper').find('.section_q_btn_wrapper.active').removeClass('active').addClass('hidden');r_section.addClass('active').removeClass('hidden');}
$('#test_right_snippets_wrapper').find('.section_q_btn_wrapper').find('.test_icons.active').removeClass('active');$('#test_right_snippets_wrapper').find('.section_q_btn_wrapper').find('.'+question_id).addClass('active');}
function bring_section_in_view(section_id){if(!section_id){alert("Last Section's Last Question Reached !")
return;}
var secttime=$.trim($('#secttime').text());if(secttime=='1'){return;}
var current_section=$('#test_questions_wrapper').find('.active_section');var current_section_id=current_section.attr('data-section-id');current_section.removeClass('active_section').addClass('hidden');var $next_section=$('#test_questions_wrapper').find('.'+section_id+"_center");$next_section.addClass('active_section').removeClass('hidden');bring_question_in_view($next_section.find('.question_basic:first-child').attr('id'));}
function bring_next_question_in_view(question_id){var cur_q=$('#test_questions_wrapper').find('#'+question_id);if(cur_q.next().length>0){var next_question_id=cur_q.next().attr('id');bring_question_in_view(next_question_id);}else{var secttime=$.trim($('#secttime').text());if(secttime=='1'){alert("You Reached Last Question For Section!")
return;}
var $next_section=cur_q.closest('.section_wrapper').next('.section_wrapper');if($next_section.length>0){bring_question_in_view($next_section.find('.question_basic:first-child').attr('id'));}else{alert("You have Reached the last Question of the Test.");}}}
function bring_previous_question_in_view(question_id){var cur_q=$('#test_questions_wrapper').find('#'+question_id);if(cur_q.prev().length>0){var next_question_id=cur_q.prev().attr('id');bring_question_in_view(next_question_id);}else{var secttime=$.trim($('#secttime').text());if(secttime=='1'){alert("Last Section's First Question Reached !")
return;}
var $prev_section=cur_q.closest('.section_wrapper').prev('.section_wrapper');if($prev_section.length>0||secttime!='1'){bring_question_in_view($prev_section.find('.question_basic:last-child').attr('id'));}else{alert("You have Reached the First Question of the Test.");}}}
function change_question_state(question_id,state){var current_question=$('#'+question_id);current_question.removeClass('unseen');if(state=="answered"){current_question.removeClass('skipped').removeClass('marked').addClass('answered');$('#test_left_snippets_wrapper').find('.'+question_id).find('.icon').addClass('answered').removeClass('skipped unseen');$('#test_right_snippets_wrapper').find('.'+question_id).addClass('answered').removeClass('skipped unseen');if(current_question.attr('data-current-state')=="marked"){current_question.attr('data-current-state','marked_answered');}else if(current_question.attr('data-current-state')=="marked_answered"){}else{current_question.attr('data-current-state','answered');}}else if(state=="skipped"){if(!current_question.hasClass('marked')){current_question.attr('data-current-state','skipped').addClass('skipped').removeClass('answered');$('#test_left_snippets_wrapper').find('.'+question_id).find('.icon').addClass('skipped').removeClass('answered unseen');$('#test_right_snippets_wrapper').find('.'+question_id).addClass('skipped').removeClass('answered unseen');}else if(current_question.hasClass('marked')&&current_question.hasClass('answered')){current_question.attr('data-current-state','marked').removeClass('answered');$('#test_left_snippets_wrapper').find('.'+question_id).find('.icon').removeClass('answered');$('#test_right_snippets_wrapper').find('.'+question_id).removeClass('answered');}}
quesCalus();}
$(document).on('click','.test_q_list_item',function(){bring_question_in_view($(this).attr('data-question-id'));});$(document).on('click','#test_right_snippets_wrapper .test_icons',function(){bring_question_in_view($(this).attr('data-question-id'));});$(document).on('click','.top_section_btns',function(){bring_section_in_view($(this).attr('data-section-id'));});$(document).on('click','#save_and_next_btn',function(){var current_question_id=$('#test_questions_wrapper').find('.question_basic.active_question').attr('id');bring_next_question_in_view(current_question_id);});$(document).on('click','#save_and_prev_btn',function(){var current_question_id=$('#test_questions_wrapper').find('.question_basic.active_question').attr('id');bring_previous_question_in_view(current_question_id);});$(document).on('click','#mark_for_review_btn',function(){var current_question=$('#test_questions_wrapper').find('.question_basic.active_question');if(current_question.attr('data-current-state')=="answered"){current_question.attr('data-current-state','marked_answered');}else{current_question.attr('data-current-state','marked');}
var question_id=current_question.attr('id');current_question.addClass('marked').removeClass('skipped');$('#test_left_snippets_wrapper').find('.'+question_id).find('.icon').addClass('marked').removeClass('unseen skipped');$('#test_right_snippets_wrapper').find('.'+question_id).addClass('marked').removeClass('unseen skipped');});$(document).on('click','#clear_response_btn',function(){var current_question=$('#test_questions_wrapper').find('.question_basic.active_question');current_question.find(':checked').prop("checked","");});$(document).on('click','.show_summary_button',function(){bring_question_in_view('dummy');$('.summary_table .summary_row').remove();var total_marked_count=0;$('#test_questions_wrapper .section_wrapper').each(function(){var section_name=$(this).attr('data-section-name');var summary_template=$('.summary_table').find('.summary_row_template').clone().removeClass('summary_row_template hidden').addClass('summary_row');var answered_count=0;var skipped_count=0;var marked_count=0;var unseen_count=0;$(this).find('.question_basic').each(function(){if($(this).attr('id')!="dummy"){if($.trim($(this).attr('data-current-state'))=="answered"){answered_count+=1}else if($.trim($(this).attr('data-current-state'))=="skipped"){skipped_count+=1;}else if($.trim($(this).attr('data-current-state'))=="marked"||$.trim($(this).attr('data-current-state'))=="marked_answered"){marked_count+=1}else if($.trim($(this).attr('data-current-state'))=="unseen"){unseen_count+=1;}}});total_marked_count+=marked_count;summary_template.find('.answered_count').text(answered_count).end().find('.skipped_count').text(skipped_count).end().find('.marked_count').text(marked_count).end().find('.unseen_count').text(unseen_count).end().find('.section_name').text(section_name);console.log(summary_template);$('.summary_table').append(summary_template);});if(total_marked_count==0){$('.summary_warning').addClass('hidden');}else{$('.summary_warning').removeClass('hidden');$('.warning_marked_count').text(total_marked_count);}
$('#before_submit_summary_modal').modal('show');});$(document).on('click','.show_summary_pause_button',function(){$('.summary_table .summary_row').remove();var total_marked_count=0;$('#test_questions_wrapper .section_wrapper').each(function(){var section_name=$(this).attr('data-section-name');var summary_template=$('.summary_table').find('.summary_row_template').clone().removeClass('summary_row_template hidden').addClass('summary_row');var answered_count=0;var skipped_count=0;var marked_count=0;var unseen_count=0;$(this).find('.question_basic').each(function(){if($(this).attr('id')!="dummy"){if($.trim($(this).attr('data-current-state'))=="answered"){answered_count+=1}else if($.trim($(this).attr('data-current-state'))=="skipped"){skipped_count+=1;}else if($.trim($(this).attr('data-current-state'))=="marked"||$.trim($(this).attr('data-current-state'))=="marked_answered"){marked_count+=1}else if($.trim($(this).attr('data-current-state'))=="unseen"){unseen_count+=1;}}});total_marked_count+=marked_count;summary_template.find('.answered_count').text(answered_count).end().find('.skipped_count').text(skipped_count).end().find('.marked_count').text(marked_count).end().find('.unseen_count').text(unseen_count).end().find('.section_name').text(section_name);console.log(summary_template);$('.summary_table').append(summary_template);});if(total_marked_count==0){$('.summary_warning').addClass('hidden');}else{$('.summary_warning').removeClass('hidden');$('.warning_marked_count').text(total_marked_count);}});function get_test_attempt_data(){var questions=[];var total_time_spent=parseInt($.trim($('#prj_timer').find('.total_seconds').text()));var test_id=$.trim($('#test_id').text());var secttime=$.trim($('#secttime').text());var totsec=$.trim($('#totsec').text());var attempt_id=$.trim($('#attempt_id').text());var last_seen_question_id=$('.active_question').attr('id');var sections=[];$('#test_questions_wrapper .section_wrapper').each(function(){var section_id=encodeURIComponent($(this).attr('data-section-id'));var section={};section.section_id=section_id;section.time_spent=0;$(this).find('.question_basic').each(function(){if($(this).attr('id')!="dummy"){var question={};question.section_id=section_id;question.question_id=$(this).attr('id');question.topic_id=encodeURIComponent($(this).attr('data-topic'));question.status=$.trim($(this).attr('data-current-state'));if($(this).attr('data-question-type')=="numerical"){question.answer_value=$(this).find('.answer_value_input_box').val();}else{question.option_ids=[];$(this).find('.option_input:checked').each(function(){question.option_ids.push($(this).attr('data-option-id'));});}
question.time_spent=parseFloat($(this).attr('data-time-spent'));questions.push(question);section.time_spent+=parseFloat($(this).attr('data-time-spent'));}});sections.push(section);});var csrf=$('#csrf_form').find('input[name="csrfmiddlewaretoken"]').val();var dataString="csrfmiddlewaretoken="+csrf;dataString+="&questions="+JSON.stringify(questions);dataString+="&total_time_spent="+total_time_spent;dataString+="&test_id="+test_id;dataString+="&secttime="+secttime;dataString+="&totsec="+totsec;dataString+="&attempt_id="+attempt_id;dataString+="&last_seen_question_id="+last_seen_question_id;dataString+="&sections="+JSON.stringify(sections);return dataString;}
function get_test_attempt_data_json(){var json_data={};var questions=[];var total_time_spent=parseFloat($.trim($('#prj_timer').find('.total_seconds').text()));var test_durationsec=$.trim($('#test_durationsec').text());var total_secondsec=$.trim($('.total_secondsec').text());var test_id=$.trim($('#test_id').text());var secttime=$.trim($('#secttime').text());var attempt_id=$.trim($('#attempt_id').text());var last_seen_question_id=$('.active_question').attr('id');var sections=[];$('#test_questions_wrapper .section_wrapper').each(function(){var section_id=encodeURIComponent($(this).attr('data-section-id'));var section={};section.section_id=section_id;section.time_spent=0;$(this).find('.question_basic').each(function(){if($(this).attr('id')!="dummy"){var question={};question.section_id=section_id;question.question_id=$(this).attr('id');question.topic_id=encodeURIComponent($(this).attr('data-topic'));question.status=$.trim($(this).attr('data-current-state'));if($(this).attr('data-question-type')=="numerical"){question.answer_value=$(this).find('.answer_value_input_box').val();}else{question.option_ids=[];$(this).find('.option_input:checked').each(function(){question.option_ids.push($(this).attr('data-option-id'));});}
question.time_spent=parseFloat($(this).attr('data-time-spent'));questions.push(question);section.time_spent+=parseFloat($(this).attr('data-time-spent'));}});sections.push(section);});console.log('enter save');json_data['questions']=JSON.stringify(questions);json_data["total_time_spent"]=total_time_spent;json_data["test_durationsec"]=test_durationsec;json_data["total_secondsec"]=total_secondsec;json_data["test_id"]=test_id;json_data["secttime"]=secttime;json_data["attempt_id"]=attempt_id;json_data["last_seen_question_id"]=last_seen_question_id;json_data["sections"]=JSON.stringify(sections);return json_data;}
save_online_test_state_localstorage=function(){if(pauseval==0){console.log("Saving in localStorage");var test_data=JSON.stringify(get_test_attempt_data_json());var attempt_id=$('#attempt_id').text();store.set(attempt_id,test_data);}}
var store;var secthhrarray=[];var sectminarray=[];var secthhrnamearray=[];var totalsec=0;$('#secttimeparts .section_time_exam').each(function(){var section_namehr=encodeURIComponent($(this).attr('data-sectionname-id'));var section_timehr=encodeURIComponent($(this).attr('data-sectiontime-val'));totalsec+=section_timehr*60;secthhrarray.push(totalsec);sectminarray.push(section_timehr);secthhrnamearray.push(section_namehr);});$(document).ready(function(){store=new Persist.Store('OnlineTestPersistStore');var attempt_id=$('#attempt_id').text();var secttime=$.trim($('#secttime').text());if(secttime=='1'){}
var data=store.get(attempt_id);if(data){console.log("@@@@@@@@@@@@@@@@@ GOT DATA FROM LOCALSTORAGE @@@@@@@@@@@@@");data_json=$.parseJSON(data);var total_seconds_spent=parseInt(data_json['total_time_spent']);$('#prj_timer').find('.total_seconds').text(data_json['total_time_spent']);var test_duration=parseInt($('#test_duration').text());var remaining_minutes=test_duration-parseInt(total_seconds_spent/60);$('#test_duration').text(remaining_minutes);$('#test_durationsec').text(data_json['test_durationsec']);$('.total_secondsec').text(data_json['total_secondsec']);var section_wise_data=$.parseJSON(data_json['sections']);var question_wise_data=$.parseJSON(data_json['questions']);$.each(question_wise_data,function(index,value){var question_id=value['question_id'];var question_box=$('#'+question_id);question_box.attr('data-time-spent',parseFloat(value['time_spent']));question_box.attr('data-current-state',value['status']);question_status=value['status'].replace('_'," ");question_box.addClass(question_status);$('#test_right_snippets_wrapper').find('.'+question_id).addClass(question_status).removeClass('unseen');var checked_options=value['option_ids'];if(checked_options){$.each(checked_options,function(index,value){question_box.find('.option_input[data-option-id='+value+']').prop("checked",true);});}
var answer_value=value['answer_value'];question_box.find('.answer_value_input_box').val(answer_value);});var secttime=$.trim($('#secttime').text());if(secttime=='1'){var aa=0;secthhrarray.forEach(function(item,index){if(item<=total_seconds_spent){aa++;}});if(secthhrnamearray[aa]!==undefined){$('#secttime').empty().append('0');bring_section_in_view(secthhrnamearray[aa]);$('#secttime').empty().append('1');}}
start_test_timer();}else{start_test_timer();}});function save_online_test_state(){try{var dataString=get_test_attempt_data();$.ajax({url:"https://estore.ibpsguide.com/new_submit_result.php",data:dataString,type:'post',beforeSend:function(){},complete:function(){},success:function(return_data){},error:function(xhr,status,errorThrown){}});}catch(e){}}
var save_online_test_interval;if(typeof(Storage)!=="undefined"){save_online_test_interval=setInterval(save_online_test_state_localstorage,10000);}else{save_online_test_interval=setInterval(save_online_test_state,60000);}
function submit_test(malpractice){var attempt_id=$('#attempt_id').text();clearInterval(universal_timer);clearInterval(save_online_test_interval);var current_btn=$('#finish_test_btn');var dataString=get_test_attempt_data();var form_url=current_btn.attr('data-submit-test-url');$.ajax({url:form_url,data:dataString,type:'post',beforeSend:function(){$('.page_form_loader').removeClass('hidden');current_btn.button('loading');},complete:function(){},success:function(return_data){var resp_obj=$.parseJSON(return_data);if(resp_obj.hasOwnProperty("success")){localStorage.removeItem(attempt_id);store.remove(attempt_id);if(resp_obj.hasOwnProperty("redirect_url")){window.location=resp_obj.redirect_url;}}else if(resp_obj.hasOwnProperty("errors")){$('.page_form_loader').addClass('hidden');current_btn.button('reset');alert("Important Message from estore.ibpsguide.com \n Your Test has been submitted successfully; Due to huge traffic you can’t view your result now, sorry for the inconvenience, kindly check after some time, and you can directly view the result and solution of this test..\n "+resp_obj["errors"]);window.location='index.php';}},error:function(xhr,status,errorThrown){$('.page_form_loader').addClass('hidden');current_btn.button('reset');alert("Important Message from estore.ibpsguide.com \n Your Test has been submitted successfully; Due to huge traffic you can’t view your result now, sorry for the inconvenience, kindly check after some time, and you can directly view the result and solution of this test..\n "+errorThrown+status);}});};$(document).on('click','#finish_test_btn',function(event){submit_test(false);});$(document).on('click','.show_more_paragraph .btn',function(){var current_paragraph=$(this).closest('.paragraph_text');current_paragraph.css({'overflow':'visible','height':'auto'});$(this).closest('.show_more_paragraph').remove();});$(document).on('click','.hide_target',function(event){event.preventDefault();$($(this).attr("data-target")).addClass("hidden");});function start_test_timer(){if(parseInt($('#test_duration').text())<=0){submit_test(false);return;}
$('#prj_timer').startPrjCounter({'minutes':$('#test_duration').text()},function(){$('#prj_timer').find('.countdown').text("Test Ended !");$('#finish_test_btn').click();});}
function secondsTimeSpanToHMS(s){var h=Math.floor(s/3600);s-=h*3600;var m=Math.floor(s/60);s-=m*60;return(h<10?'0'+h:h)+":"+(m<10?'0'+m:m)+":"+(s<10?'0'+s:s);}
function start_test_timercheck(){var totsec=$('.total_seconds').text();var secttime=$.trim($('#secttime').text());if(secttime=='1'){var a=secthhrarray.indexOf(parseInt(totsec));if(a!='-1'){a++;if(secthhrnamearray[a]!==undefined){var processtime=parseInt(secthhrarray[a]);$('#test_durationsec').text(processtime);$('.total_secondsec').text(processtime);alert("Section's Time Finished. Automatically move To Next Section Name: "+secthhrnamearray[a])
$('#secttime').empty().append('0');bring_section_in_view(secthhrnamearray[a]);$('#secttime').empty().append('1');}}else{if(totsec<secthhrarray[0]){var processtime=parseInt(secthhrarray[0]);$('#test_durationsec').text(processtime);$('.total_secondsec').text(processtime);}}
var tolval=$('#test_durationsec').text();var bal=parseInt(tolval)-parseInt(totsec);var splittime=secondsTimeSpanToHMS(bal).split(":");$('.hourssec').text(splittime[0]);$('.minutessec').text(splittime[1]);$('.secondssec').text(splittime[2]);}}
$(document).ready(function(){if($('#last_seen_question_id').length==1){bring_question_in_view($('#last_seen_question_id').text());}});function display_autohide_notification(msg,msg_level,timeout){var heading=$('#success_modal .modal-header');heading.find('.modal-title').text(" ");if(msg_level=="success"){heading.removeClass('bg-red');heading.addClass('bg-green');}else if(msg_level=="error"){heading.removeClass('bg-green');heading.addClass('bg-red');}
heading.find('.modal-title').html(msg);$('#success_modal').modal('show');setTimeout(function(){$('#success_modal').modal('hide');},timeout);}
$(document).on("contextmenu",function(event){event.preventDefault();});function insertAtCursor(myField,myValue){if(document.selection){myField.focus();sel=document.selection.createRange();sel.text=myValue;}
else if(myField.selectionStart||myField.selectionStart=='0'){var startPos=myField.selectionStart;var endPos=myField.selectionEnd;myField.value=myField.value.substring(0,startPos)+
myValue+
myField.value.substring(endPos,myField.value.length);myField.selectionStart=startPos+myValue.length;myField.selectionEnd=startPos+myValue.length;}else{myField.value+=myValue;}}
function backSpaceAtCursor(elem){var txt=$(elem);var startPos=txt[0].selectionStart;var endPos=txt[0].selectionEnd;var scrollPos=txt[0].scrollTop;if(endPos-startPos>0){txt.val(txt.val().slice(0,startPos)+txt.val().slice(endPos,100));}else if(endPos>0){txt.val(txt.val().slice(0,startPos-1)+txt.val().slice(startPos,100));}else{startPos=txt.val().length+1;}
txt.focus();txt[0].setSelectionRange(startPos-1,startPos-1);}
function setCaretPosition(elem,caretPos){if(elem!=null){if(elem.createTextRange){var range=elem.createTextRange();range.move('character',caretPos);range.select();}else{if(elem.selectionStart||elem.selectionStart=='0'){elem.focus();elem.setSelectionRange(caretPos,caretPos);}else
elem.focus();}}}
$(document).on('click','.numerical_input_btn',function(event){event.preventDefault();var elem=$(this).closest('.question_basic').find('.answer_value_input_box')[0];if($(this).hasClass('number_pad')||$(this).hasClass('decimal_pad')||$(this).hasClass('minus_pad')){var value=$.trim($(this).text());insertAtCursor(elem,value);$(this).closest('.question_basic').find('.answer_value_input_box').focus();}else if($(this).hasClass('backspace_pad')){backSpaceAtCursor(elem);$(this).closest('.question_basic').find('.answer_value_input_box').focus();}else if($(this).hasClass('arrow_left_pad')){var caret_position=elem.selectionStart;setCaretPosition(elem,caret_position-1);}else if($(this).hasClass('arrow_right_pad')){var caret_position=elem.selectionStart;if(caret_position==0){$(this).closest('.question_basic').find('.answer_value_input_box').focus();setCaretPosition(elem,2);}
setCaretPosition(elem,caret_position+1);}else if($(this).hasClass('clear_all_pad')){$(this).closest('.question_basic').find('.answer_value_input_box').val("");}});$(document).on('keypress','.answer_value_input_box',function(event){return false;});var pauseval=0;function pausetime(){pauseval=1;clearInterval(interval);}
function starttime(){var total_seconds_spent=parseFloat($.trim($('#prj_timer').find('.total_seconds').text()));var test_duration=parseInt($('#test_duration_setpass').text());var minutes=Math.floor(total_seconds_spent/60);var remaining_minutes=test_duration-parseInt(minutes);$('#prj_timer').startPrjCounter({'minutes':remaining_minutes},function(){$('#prj_timer').find('.countdown').text("Test Ended !");$('#finish_test_btn').click();});pauseval=0;}